# ğŸ“– CÃ³mo Usar el Visor de Datos

## âš¡ Inicio RÃ¡pido (3 pasos)

### OpciÃ³n A: Manual (MÃ¡s Segura)

```bash
# 1. Cerrar Chrome
Cmd+Q

# 2. Ir a la carpeta
cd viewextensiondata

# 3. Ejecutar
npm run dev
```

---

### OpciÃ³n B: AutomÃ¡tica (MÃ¡s RÃ¡pida)

```bash
# 1. Ir a la carpeta
cd viewextensiondata

# 2. Ejecutar (cierra Chrome automÃ¡ticamente)
npm run auto
```

---

## ğŸ¯ Â¿QuÃ© VerÃ¡s?

```
ğŸ” Visor de Datos de ExtensiÃ³n Chrome
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Extension ID: olpjfcpnbgdhggbdgljefhgejjhfobal
Ruta DB: .../Local Extension Settings/olpjfcpnbgdhggbdgljefhgejjhfobal

âœ… Base de datos leÃ­da exitosamente

ğŸ“Š Total de entradas: 4

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ DATOS DE LA EXTENSIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”‘ Key: codecrypto_accounts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Tipo: Array de Cuentas
   [0] 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
   [1] 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
   [2] 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC
   [3] 0x90F79bf6EB2c4f870365E785982E1f101E93b906
   [4] 0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65

ğŸ”‘ Key: codecrypto_chain_id
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Tipo: Chain ID
   Valor: 0x7a69 Hardhat Local (31337)

ğŸ”‘ Key: codecrypto_current_account
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Tipo: Ãndice de Cuenta Actual
   Valor: 0 (Cuenta 0)

ğŸ”‘ Key: codecrypto_mnemonic
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Tipo: Mnemonic (Frase de RecuperaciÃ³n)
   Valor: test test test test test test test test test test test junk

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ RESUMEN:

  Mnemonic guardado: âœ… SÃ­
  Cuentas derivadas: âœ… SÃ­
  Cuenta actual: âœ… SÃ­
  Chain ID: âœ… SÃ­
  Solicitud pendiente: âœ… No
  NÃºmero de cuentas: 5

âœ… WALLET CONFIGURADA CORRECTAMENTE
```

---

## ğŸ¨ Significado de los Colores

- ğŸ”µ **Azul:** TÃ­tulos y separadores
- ğŸŸ¢ **Verde:** Valores y confirmaciones (âœ…)
- ğŸŸ¡ **Amarillo:** Advertencias y tipos de dato
- ğŸ”´ **Rojo:** Errores (âŒ)
- âšª **Gris:** InformaciÃ³n secundaria
- ğŸ”· **Cyan:** Keys y nÃºmeros

---

## ğŸ“‹ Datos que Muestra

### 1. codecrypto_mnemonic
```
Tipo: Mnemonic (Frase de RecuperaciÃ³n)
Valor: test test test test test test test test test test test junk
```

**QuÃ© es:** La frase de 12 palabras BIP-39 que genera todas las cuentas.

---

### 2. codecrypto_accounts
```
Tipo: Array de Cuentas
[0] 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
[1] 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
[2] 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC
[3] 0x90F79bf6EB2c4f870365E785982E1f101E93b906
[4] 0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65
```

**QuÃ© es:** Las 5 direcciones derivadas usando BIP-44 (m/44'/60'/0'/0/0 a /4).

---

### 3. codecrypto_current_account
```
Tipo: Ãndice de Cuenta Actual
Valor: 0 (Cuenta 0)
```

**QuÃ© es:** Ãndice (0-4) de la cuenta que estÃ¡ activa en la wallet.

---

### 4. codecrypto_chain_id
```
Tipo: Chain ID
Valor: 0x7a69 Hardhat Local (31337)
```

**QuÃ© es:** La red blockchain actual:
- `0x7a69` = Hardhat Local (31337)
- `0xaa36a7` = Sepolia Testnet (11155111)

---

### 5. codecrypto_pending_request (Si existe)
```
Tipo: Solicitud Pendiente
Detalles:
{
  "approvalId": 1,
  "method": "eth_sendTransaction",
  "params": [...]
}
```

**QuÃ© es:** Una transacciÃ³n esperando aprobaciÃ³n del usuario.

---

## ğŸ”§ Troubleshooting

### Error: "IO error: lock"

**Causa:** Chrome estÃ¡ abierto.

**SoluciÃ³n:**
```bash
# Cerrar Chrome
Cmd+Q

# O forzar cierre
killall "Google Chrome"

# Esperar 5 segundos
sleep 5

# Reintentar
npm run dev
```

---

### Error: "La ruta no existe"

**Causa:** Extension ID incorrecto o extensiÃ³n no instalada.

**SoluciÃ³n:**
```bash
# 1. Abrir Chrome
# 2. chrome://extensions/
# 3. CodeCrypto Wallet â†’ Details
# 4. Copiar ID de la URL
# 5. Editar src/index.ts:
const EXTENSION_ID = 'tu-id-aqui'
# 6. Recompilar:
npm run build
```

---

### Chrome No Se Cierra (versiÃ³n auto)

**Causa:** Puede haber procesos de Chrome en segundo plano.

**SoluciÃ³n:**
```bash
# Ver procesos de Chrome
pgrep -l Chrome

# Forzar cierre de todos
killall -9 "Google Chrome"
killall -9 "Google Chrome Helper"

# Esperar 10 segundos
sleep 10

# Reintentar
npm run auto
```

---

## ğŸ“Š Casos de Uso

### Caso 1: Verificar ConfiguraciÃ³n

```bash
# DespuÃ©s de configurar la wallet en Chrome
Cmd+Q  # Cerrar Chrome
npm run dev

# Ver que todo estÃ¡ âœ…
```

---

### Caso 2: Debugging "No accounts available"

```bash
# Si la extensiÃ³n da ese error
Cmd+Q
npm run dev

# Verificar:
# - Â¿Existe codecrypto_accounts?
# - Â¿Tiene 5 elementos?
# - Â¿codecrypto_current_account es 0-4?
```

---

### Caso 3: Ver QuÃ© Cuenta EstÃ¡ Activa

```bash
npm run dev

# Buscar:
codecrypto_current_account: 0  â† Cuenta activa
```

---

### Caso 4: Ver en QuÃ© Red EstÃ¡s

```bash
npm run dev

# Buscar:
codecrypto_chain_id: 0x7a69    â† Hardhat
codecrypto_chain_id: 0xaa36a7  â† Sepolia
```

---

### Caso 5: Detectar Transacciones Atascadas

```bash
# Si una TX no se completÃ³
npm run dev

# Buscar:
codecrypto_pending_request
```

Si existe, significa que hay una solicitud pendiente que no se completÃ³.

**SoluciÃ³n:**
```bash
# Desde service worker console (con Chrome abierto):
chrome.storage.local.remove('codecrypto_pending_request')
```

---

## ğŸ¯ ComparaciÃ³n de Versiones

| CaracterÃ­stica | Manual (dev) | AutomÃ¡tica (auto) |
|----------------|--------------|-------------------|
| Cierra Chrome | âŒ TÃº lo haces | âœ… Script lo hace |
| Seguridad | âœ… MÃ¡s segura | âš ï¸  Menos segura |
| Velocidad | â±ï¸ MÃ¡s lenta | âš¡ MÃ¡s rÃ¡pida |
| Requiere sudo | âŒ No | âŒ No |
| Guarda trabajo | âœ… TÃº decides | âš ï¸  Cierra inmediatamente |

**RecomendaciÃ³n:** Usar `npm run dev` (manual) salvo que estÃ©s haciendo pruebas rÃ¡pidas.

---

## ğŸ“ Archivos

```
viewextensiondata/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts         â† VersiÃ³n manual
â”‚   â””â”€â”€ view-auto.ts     â† VersiÃ³n automÃ¡tica
â”œâ”€â”€ dist/                â† Compilados
â”‚   â”œâ”€â”€ index.js
â”‚   â””â”€â”€ view-auto.js
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ README.md            â† Este archivo
â”œâ”€â”€ INSTRUCCIONES.md     â† GuÃ­a detallada
â””â”€â”€ COMO_USAR.md         â† Este archivo
```

---

## ğŸ” Entender el Output

### SecciÃ³n 1: Info General

```
Extension ID: olpjfcpnbgdhggbdgljefhgejjhfobal
Ruta DB: .../Local Extension Settings/...
```

InformaciÃ³n bÃ¡sica de la extensiÃ³n.

---

### SecciÃ³n 2: Datos

```
ğŸ”‘ Key: codecrypto_mnemonic
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Tipo: Mnemonic
   Valor: test test test...
```

Cada clave (key) almacenada con su tipo y valor.

---

### SecciÃ³n 3: Resumen

```
ğŸ“‹ RESUMEN:
  Mnemonic guardado: âœ… SÃ­
  Cuentas derivadas: âœ… SÃ­
  ...
```

Checklist rÃ¡pido del estado de la wallet.

---

### SecciÃ³n 4: Estado Final

```
âœ… WALLET CONFIGURADA CORRECTAMENTE
```

O:

```
âŒ WALLET NO CONFIGURADA
```

DiagnÃ³stico general.

---

## ğŸ’¡ Tips

### Tip 1: Alias de Terminal

```bash
# En ~/.zshrc:
alias viewdb='cd /path/to/viewextensiondata && npm run auto'

# Luego solo:
viewdb
```

---

### Tip 2: Ver Solo Resumen

Puedes modificar `src/index.ts` para mostrar solo el resumen:

```typescript
// Comentar la secciÃ³n de "Mostrar datos formateados"
// Dejar solo la secciÃ³n "Resumen"
```

---

### Tip 3: Exportar a JSON

Agregar al final de `src/index.ts`:

```typescript
import * as fs from 'fs'

// Exportar a archivo
fs.writeFileSync('./extension-data.json', JSON.stringify(data, null, 2))
console.log('âœ… Exportado a extension-data.json')
```

---

## ğŸ“ CÃ³digo de InterÃ©s

### Abrir LevelDB:

```typescript
import { Level } from 'level'

const db = new Level(DB_PATH, { valueEncoding: 'json' })

// Leer todas las entradas
for await (const [key, value] of db.iterator()) {
  console.log(key, value)
}

await db.close()
```

### Cerrar Chrome ProgramÃ¡ticamente:

```typescript
import { exec } from 'child_process'
import { promisify } from 'util'

const execAsync = promisify(exec)

// Verificar si estÃ¡ corriendo
const { stdout } = await execAsync('pgrep -x "Google Chrome"')

if (stdout.trim()) {
  // Cerrar
  await execAsync('killall "Google Chrome"')
  
  // Esperar
  await new Promise(resolve => setTimeout(resolve, 3000))
}
```

---

## âœ… Checklist

Antes de ejecutar:

- [ ] npm install ejecutado
- [ ] Chrome cerrado (si usas `npm run dev`)
- [ ] Extension ID correcto en src/index.ts

Al ejecutar:

- [ ] No hay errores
- [ ] Muestra entradas (si wallet estÃ¡ configurada)
- [ ] Resumen tiene todos los âœ…

---

**Â¡El visor estÃ¡ listo para usar!** ğŸš€

**Recomendado:** `npm run dev` (manual) - MÃ¡s seguro

